(function(){var t=[].slice;!function(n){var r,e,i,s,u,o,c;return u=function(t){return"[object Array]"===toString.call(t)},o=function(t){return!isNaN(parseInt(t,10))},s=function(t){var n,r,e;for(n=void 0,r=void 0,e=void 0,r=1;r<arguments.length;){n=arguments[r];for(e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);r++}return t},c={ad:"ad",premium:"premium",ugc:"ugc",live:"live",duration:"duration",index:"index",id:"id",name:"name",publisher:"publisher",show:"show",url:"url",classification:"classificaiton"},e={video:{shortform:{premium:"vc11",ugc:"vc21"},longform:{premium:"vc12",ugc:"vc22"},live:{premium:"vc13",ugc:"vc23"},audio:"ac00","default":"vc00"},ad:{preroll:"va11",midroll:"va12",postroll:"va13",live:"va21",audio:"aa00","default":"va00"}},r=function(){function n(t,n){this.ad(n[c.ad]),this.premium(n[c.premium]),this.ugc(n[c.ugc]),this.duration(n[c.duration]),this.index(t),this.id(n[c.id]),this.name(n[c.name]),this.publisher(n[c.publisher]),this.show(n[c.show]),this.url(n[c.url]),this.classification(n[c.classification])}var r,i,s;return i=!1,s=!1,r=!1,n.prototype.ns_st_ad=!1,n.prototype.ns_st_cl=null,n.prototype.ns_st_cn=null,n.prototype.ns_st_ci=null,n.prototype.ns_st_ep=null,n.prototype.ns_st_pu=null,n.prototype.ns_st_pr=null,n.prototype.ns_st_cu=null,n.prototype.ns_st_ct=null,n.prototype.ad=function(){var n,r;return n=1<=arguments.length?t.call(arguments,0):[],r=null!=n?n[0]:void 0,(null!=r?r.toString():void 0)&&(this.ns_st_ad=r),this.ns_st_ad},n.prototype.ugc=function(){var n,r;return n=1<=arguments.length?t.call(arguments,0):[],r=null!=n?n[0]:void 0,(null!=r?r.toString():void 0)&&(s=r),s},n.prototype.premium=function(){var n,r;return n=1<=arguments.length?t.call(arguments,0):[],r=null!=n?n[0]:void 0,(null!=r?r.toString():void 0)&&(i=r),i},n.prototype.live=function(){var n,e;return n=1<=arguments.length?t.call(arguments,0):[],e=null!=n?n[0]:void 0,(null!=e?e.toString():void 0)&&(r=e),r},n.prototype.duration=function(t,n){return n&&(t=1e3*t),t&&(this.ns_st_cl=Math.round(t)),this.ns_st_cl||0},n.prototype.index=function(t){return t&&(this.ns_st_cn=t),this.ns_st_cn},n.prototype.id=function(t){return t&&(this.ns_st_ci=t),this.ns_st_ci},n.prototype.name=function(t){return t&&(this.ns_st_ep=t),this.ns_st_ep},n.prototype.publisher=function(t){return t&&(this.ns_st_pu=t),this.ns_st_pu},n.prototype.show=function(t){return t&&(this.ns_st_pr=t),this.ns_st_pr},n.prototype.url=function(t){return t&&(this.ns_st_cu=t),this.ns_st_cu},n.prototype.classification=function(t){var n;return t&&(this.ns_st_ct=t),n=function(t){return function(){return t.duration()/1e3>=600}}(this),this.ad()?this.ns_st_ct=e.ad.preroll:this.live()?(this.premium()&&(this.ns_st_ct=e.video.live.premium),this.ugc()&&(this.ns_st_ct=e.video.live.ugc)):n()?(this.premium()&&(this.ns_st_ct=e.video.longform.premium),this.ugc()&&(this.ns_st_ct=e.video.longform.ugc)):(this.premium()&&(this.ns_st_ct=e.video.shortform.premium),this.ugc()&&(this.ns_st_ct=e.video.shortform.ugc)),this.ns_st_ct||(this.ns_st_ct=e.video["default"]),this.ns_st_ct},n}(),i=function(t,n,i){var l,a,p,_,h,d,f,m,v,g,y,S,E,w,b,P,A,C,F,L,U;if(!o(t))throw new Error("The first argument should be your comScore ID");if(!u(n))throw new Error("The second argument should be an array (can be empty)");return f={BUFFER:ns_.StreamSense.PlayerEvents.BUFFER,END:ns_.StreamSense.PlayerEvents.END,PLAY:ns_.StreamSense.PlayerEvents.PLAY,PAUSE:ns_.StreamSense.PlayerEvents.PAUSE},P=this,L=new ns_.StreamSense({},"http://b.scorecardresearch.com/p?c1=2&c2="+t),_=null,p=[],i&&(c=s({},c,i)),h=0,F=!1,C=0,S=function(){return p=E(n),p.length>0?L.setPlaylist(p):void 0},E=function(t){return t.map(function(t,n){return new r(n,t)})},m=function(t){var n,r,e;for(r=0,e=p.length;e>r;r++)if(n=p[r],t===n.url())return n;return p[0]},g=function(){return m(P.currentSrc())},y=function(){return Math.round(1e3*P.currentTime())},v=function(t){return t>=0?p[t]:p},U=function(){return _=g(),_.url(P.currentSrc()),_.duration(P.duration(),!0),L.getClip().setLabel("ns_st_cu",P.currentSrc()),L.getClip().setLabel("ns_st_cl",_.duration(P.duration(),!0)),L.setClip(_)},a=function(){var t;return t=!F&&C++>3,t&&h===y()?(F=!0,C=0,l(h),!0):F&&h!==y()?(b(h),F=!1,C=0,!1):!1},b=function(t){return L.notify(f.PLAY,{},t)},w=function(t){return L.notify(f.PAUSE,{},t)},d=function(t){return L.notify(f.END,{},t)},l=function(t){return L.notify(f.BUFFER,{},t)},A=function(){return a(),U(),h=y()},P.on("timeupdate",function(){return U()}),P.on("play",function(){return b(h)}),P.on("ended",function(){return d(_.duration())}),P.on("pause",function(){return w(h)}),P.on("progress",A),P.comscore={play:b,pause:w,end:d,buffer:l,getClips:v,getCurrentClip:g,updateLoadedClip:U,classificationTypes:e},S(),P.comscore},n.plugin("comscore",i)}(window.videojs)}).call(this);
//# sourceMappingURL=videojs.comscore.js.map